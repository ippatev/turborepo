---
title: Package Graph Visualization
description: Interactive web-based visualization of your package graph from turbo query
---

import { Callout } from '#components/callout';
import { GraphVisualization } from '#components/graph-visualization';

# Package Graph Visualization

Visualize your repository's package graph in an interactive web interface. This page displays package dependencies and relationships using data generated by the `turbo query` GraphQL API.

<Callout type="info">
  This visualization shows your package dependency graph - how packages in your
  monorepo depend on each other. This is different from task graphs, which show
  how individual tasks depend on each other.
</Callout>

## Quick Start

1. **Generate package graph data** using the CLI:

```bash title="Terminal"
# Get the package graph with nodes and edges
turbo query '{
  packageGraph {
    nodes {
      items {
        name
      }
    }
    edges {
      items {
        source
        target
      }
    }
  }
}'
```

2. **Copy the JSON response** and paste it into the interface below to visualize your package graph.

## Interactive Package Graph Visualization

<GraphVisualization />

## Using turbo query

The `turbo query` command provides a GraphQL interface to your repository data. Here are some useful queries for package graph visualization:

### Basic Package Graph

```bash title="Terminal"
turbo query '{
  packageGraph {
    nodes {
      items {
        name
      }
    }
    edges {
      items {
        source
        target
      }
    }
  }
}'
```

### Package Graph with Additional Package Info

```bash title="Terminal"
turbo query '{
  packageGraph {
    nodes {
      items {
        name
        path
        directDependencies {
          name
        }
        directDependents {
          name
        }
      }
    }
    edges {
      items {
        source
        target
      }
    }
  }
}'
```

### Filtered Package Graph

You can filter packages to focus on specific parts of your dependency graph:

```bash title="Terminal"
# Only packages with more than 2 dependencies
turbo query '{
  packageGraph(filter: { greaterThan: { field: DIRECT_DEPENDENCY_COUNT, value: 2 } }) {
    nodes {
      items {
        name
      }
    }
    edges {
      items {
        source
        target
      }
    }
  }
}'
```

## Understanding Your Package Graph

The visualization shows:

- **Nodes**: Each package in your repository (e.g., `web`, `ui`, `utils`)
- **Edges**: Dependencies between packages (arrows point from dependents to dependencies)
- **Colors**: Different colors help distinguish between different types of packages
- **Layout**: The graph is automatically laid out to show the dependency flow

### Package Node Format

Package nodes display the package name:

- `web` - A package named "web"
- `@repo/ui` - A scoped package named "@repo/ui"
- `//` - The root package (if present)

### Reading Dependencies

- **Arrows point from dependents to dependencies**
- If `web` has an arrow pointing to `ui`, it means the `web` package depends on the `ui` package
- Packages with no incoming arrows have no dependencies within the monorepo
- Packages with no outgoing arrows are not dependencies of other packages

## Advanced Queries

### Find Packages with Many Dependencies

```bash title="Terminal"
turbo query '{
  packages(filter: { greaterThan: { field: DIRECT_DEPENDENCY_COUNT, value: 5 } }) {
    items {
      name
      directDependencies {
        name
      }
    }
  }
}'
```

### Find Packages with Many Dependents

```bash title="Terminal"
turbo query '{
  packages(filter: { greaterThan: { field: DIRECT_DEPENDENT_COUNT, value: 3 } }) {
    items {
      name
      directDependents {
        name
      }
    }
  }
}'
```

### Get a Specific Package's Dependencies

```bash title="Terminal"
turbo query '{
  package(name: "web") {
    name
    directDependencies {
      name
    }
    allDependencies {
      name
    }
  }
}'
```

## GraphiQL Interface

For an interactive GraphQL experience, run `turbo query` without arguments to open GraphiQL:

```bash title="Terminal"
turbo query
```

This opens a local GraphQL playground at `http://localhost:8000` where you can:

- Write and test queries interactively
- Browse the schema documentation
- Get autocomplete and syntax highlighting
- Save queries for later use

## Data Format

The visualization expects JSON data in this format:

```json title="something.json"
{
  "data": {
    "packageGraph": {
      "nodes": {
        "items": [
          { "name": "web" },
          { "name": "@repo/ui" },
          { "name": "utils" }
        ]
      },
      "edges": {
        "items": [
          { "source": "web", "target": "@repo/ui" },
          { "source": "web", "target": "utils" },
          { "source": "@repo/ui", "target": "utils" }
        ]
      }
    }
  }
}
```

## Troubleshooting

### Common Issues

**Empty graph**

- Ensure your repository has packages defined in `package.json` files
- Check that packages have dependencies on each other
- Verify you're running the query from the repository root

**Query errors**

- Make sure you're using valid GraphQL syntax
- Check that field names match the schema (use GraphiQL for reference)
- Ensure the query is wrapped in quotes when running from command line

**Large graphs**

- Use filters to focus on specific packages
- Consider visualizing subgraphs by filtering packages
- Use the `center` parameter to focus on packages around a specific package

## Use Cases

This visualization is helpful for:

- **Understanding dependencies**: See how packages depend on each other
- **Identifying bottlenecks**: Find packages that are dependencies of many others
- **Refactoring planning**: Understand the impact of changing a package
- **Architecture analysis**: Visualize the overall structure of your monorepo
- **Dependency cleanup**: Find unused or overly complex dependency chains

## Related Documentation

- [Query Command Reference](/docs/reference/query) - Complete reference for the `turbo query` command
- [Understanding Your Repository](/docs/crafting-your-repository/understanding-your-repository) - Guide to repository analysis
- [Package Management](/docs/crafting-your-repository/managing-dependencies) - Managing dependencies in your monorepo
